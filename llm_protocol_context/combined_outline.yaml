swab_feces:
  steps:

  - Step 1_swab_feces:
      SubSamplingProcess:
        id: # nmdc:subspr-{shoulder}-{blade}
        type: nmdc:SubSamplingProcess
        name: Subsample
        description: A portion being taken from <Biosample> for extraction
        has_input:
        - Biosample
        has_output:
        - ProcessedSample1_swab_feces #GCMS
        - ProcessedSample2_swab_feces #LCMS
        processing_institution: EMSL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 2_swab_feces:
      Extraction:
        id: # nmdc:extrp-{shoulder}-{blade}
        type: nmdc:Extraction
        name: MPLEx
        description: MPLEx extraction of <ProcessedSample1> to obtain metabolites for GCMS analysis
        has_input:
        - ProcessedSample1_swab_feces
        has_output:
        - ProcessedSample3_swab_feces # top and bottom layer
        processing_institution: EMSL
        extraction_targets:
        - metabolite
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: chloroform
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 53.3
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 26.6
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 20.0
            has_unit: "%"
        volume:
          type: nmdc:QuantityValue
          has_raw_value: 1.4 mL # authors aimed to add 0.1mL of sample
          has_numeric_value: 1.4
          has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 3_swab_feces:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: methoximation_for_GCMS
        description: Methoximation of <ProcessedSample3>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample3_swab_feces
        has_output:
        - ProcessedSample4_swab_feces
        processing_institution: EMSL
        chemical_conversion_category: substitution
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methoxyamine
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.02 mL
            has_unit: mL
            has_numeric_value: 0.02
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 4_swab_feces:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: derivatization_for_GCMS
        description: Silylation of <ProcessedSample4>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample4_swab_feces
        has_output:
        - ProcessedSample5_swab_feces # DG GCMS input
        processing_institution: EMSL
        chemical_conversion_category: addition
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: N-methyl-N-trimethylsilyltrifluoroacetamide
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0792
            has_raw_value: 0.0792 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: trimethylchlorosilane
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0008
            has_raw_value: 0.0008 mL
            has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 5_swab_feces:
      Extraction:
        id:
        type: nmdc:Extraction
        description: Extraction of metabolites from <ProcessedSample2> for LCMS analysis
        name: Extracting Metabolites
        processing_institution: UCSD
        has_input:
        - ProcessedSample2_swab_feces
        has_output:
        - ProcessedSample6_swab_feces #supernatant
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: ethanol
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.9
            has_raw_value: 0.9 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.1
            has_raw_value: 0.1 mL
            has_unit: mL
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 6_swab_feces:
      ChromatographicSeparationProcess:
        id: # nmdc:cspro-{shoulder}-{blade}
        type: nmdc:ChromatographicSeparationProcess
        name: SPE
        description: Solid phase extraction of metabolites from <ProcessedSample6> for LCMS analysis
        has_input:
        - ProcessedSample6_swab_feces
        has_output:
        - ProcessedSample7_swab_feces
        processing_institution: UCSD
        chromatographic_category: solid_phase_extraction
        ordered_mobile_phases:
        - type: nmdc:MobilePhaseSegment   # SPE beds activated
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          - type: nmdc:PortionOfSubstance
            known_as: water
        - type: nmdc:MobilePhaseSegment   # Wash solvent
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: water
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 1
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 70
              has_unit: "%"
          - type: nmdc:PortionOfSubstance
            known_as: water
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 30
              has_unit: "%"
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 2
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.6
            has_raw_value: 0.6 mL
            has_unit: mL
        stationary_phase: HLB
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 7_swab_feces:
      DissolvingProcess:
        id:
        type: nmdc:DissolvingProcess
        name: SPE_resuspension
        description: Resuspension of <ProcessedSample7>
        has_input:
        - ProcessedSample7_swab_feces
        has_output:
        - ProcessedSample8_swab_feces # DG LCMS input
        processing_institution: UCSD
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.091
            has_raw_value: 0.091 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: water
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.039
            has_raw_value: 0.039 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: amitriptyline
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 0.2
            has_unit: "umol/L"
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  processedsamples:

  - ProcessedSample1_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_GCMS
        description: Subsample of <Biosample> for GCMS metabolomics extraction and analysis

  - ProcessedSample2_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_LCMS
        description: Subsample of <Biosample> for LCMS metabolomics extraction and analysis

  - ProcessedSample3_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_mplex_extracted_GCMS
        description: Mplex-extracted, top and bottom layer for GCMS metabolomics analysis

  - ProcessedSample4_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_methoximated_GCMS
        description: Methoximation for GCMS metabolomics analysis

  - ProcessedSample5_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_derivatized_GCMS
        description: Derivatized <Biosample> for GCMS metabolomics analysis #input to DG
        sampled_portion: methanol_layer

  - ProcessedSample6_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_extracted_LCMS
        description: Extracted supernatant from <Biosample> for LCMS metabolomics analysis

  - ProcessedSample7_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_SPE_LCMS
        description: Solid phase extraction of <Biosample> for LCMS metabolomics analysis

  - ProcessedSample8_swab_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_resuspended_LCMS
        description: Resuspended metabolites from <Biosample> for LCMS metabolomics analysis # input to DG
        sampled_portion: methanol_layer
bulk_soil:
  steps:

  - Step 1_bulk_soil:
      SubSamplingProcess:
        id: # nmdc:subspr-{shoulder}-{blade}
        type: nmdc:SubSamplingProcess
        name: Subsample
        description: A portion being taken from <Biosample> for extraction
        has_input:
        - Biosample
        has_output:
        - ProcessedSample1_bulk_soil #GCMS
        - ProcessedSample2_bulk_soil #LCMS
        processing_institution: EMSL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 2_bulk_soil:
      Extraction:
        id:
        type: nmdc:Extraction
        description: Extracting metabolites from <ProcessedSample1> for GCMS analysis
        name: Extracting Metabolites
        processing_institution: EMSL
        has_input:
        - ProcessedSample1_bulk_soil
        has_output:
        - ProcessedSample3_bulk_soil #top and bottom layers
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: chloroform
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 6.66 mL
            has_numeric_value: 6.66
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 3.33 mL
            has_numeric_value: 3.33
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 2 mL
            has_numeric_value: 2
            has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 3_bulk_soil:
      Extraction:
        id:
        type: nmdc:Extraction
        description: Extracting metabolites from <ProcessedSample3> for GCMS analysis
        name: Extracting Metabolites
        processing_institution: EMSL
        has_input:
        - ProcessedSample3_bulk_soil
        has_output:
        - ProcessedSample4_bulk_soil #supernatant
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: chloroform
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.666 mL
            has_numeric_value: 0.666
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.33 mL
            has_numeric_value: 0.333
            has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 4_bulk_soil:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: methoximation_for_GCMS
        description: Methoximation of <ProcessedSample4>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample4_bulk_soil
        has_output:
        - ProcessedSample5_bulk_soil
        processing_institution: EMSL
        chemical_conversion_category: substitution
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methoxyamine
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.02 mL
            has_unit: mL
            has_numeric_value: 0.02
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 5_bulk_soil:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: derivatization_for_GCMS
        description: Silylation of <ProcessedSample5>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample5_bulk_soil
        has_output:
        - ProcessedSample6_bulk_soil # DG GCMS input
        processing_institution: EMSL
        chemical_conversion_category: addition
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: N-methyl-N-trimethylsilyltrifluoroacetamide
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0792
            has_raw_value: 0.0792 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: trimethylchlorosilane
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0008
            has_raw_value: 0.0008 mL
            has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol


  - Step 6_bulk_soil:
      Extraction:
        id:
        type: nmdc:Extraction
        description: Extraction of metabolites from <ProcessedSample2> for LCMS analysis
        name: Extracting Metabolites
        processing_institution: UCSD
        has_input:
        - ProcessedSample2_bulk_soil
        has_output:
        - ProcessedSample7_bulk_soil #supernatant
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 70
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 30
            has_unit: "%"
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 7_bulk_soil:
      ChromatographicSeparationProcess:
        id: # nmdc:cspro-{shoulder}-{blade}
        type: nmdc:ChromatographicSeparationProcess
        name: SPE
        description: Solid phase extraction of metabolites from <ProcessedSample7> for LCMS analysis
        has_input:
        - ProcessedSample7_bulk_soil
        has_output:
        - ProcessedSample8_bulk_soil
        processing_institution: UCSD
        chromatographic_category: solid_phase_extraction
        ordered_mobile_phases:
        - type: nmdc:MobilePhaseSegment   # SPE beds activated
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          - type: nmdc:PortionOfSubstance
            known_as: water
        - type: nmdc:MobilePhaseSegment   # Wash solvent
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: water
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 1
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 70
              has_unit: "%"
          - type: nmdc:PortionOfSubstance
            known_as: water
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 30
              has_unit: "%"
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 2
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.6
            has_raw_value: 0.6 mL
            has_unit: mL
        stationary_phase: HLB
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 8_bulk_soil:
      DissolvingProcess:
        id:
        type: nmdc:DissolvingProcess
        name: SPE_resuspension
        description: Resuspension of <ProcessedSample8>
        has_input:
        - ProcessedSample8_bulk_soil
        has_output:
        - ProcessedSample9_bulk_soil # DG LCMS input
        processing_institution: UCSD
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.091
            has_raw_value: 0.091 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: water
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.039
            has_raw_value: 0.039 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: amitriptyline
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 0.2
            has_unit: "umol/L"
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol


  processedsamples:

  - ProcessedSample1_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_GCMS
        description: Subsample of <Biosample> for GCMS metabolomics extraction and analysis

  - ProcessedSample2_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_LCMS
        description: Subsample of <Biosample> for LCMS metabolomics extraction and analysis

  - ProcessedSample3_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_extracted_GCMS
        description: Extraction of top and bottom layer for GCMS metabolomics analysis of <Biosample>

  - ProcessedSample4_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_second_extraction_GCMS
        description: Extraction of supernatant for GCMS metabolomics analysis of <Biosample>

  - ProcessedSample5_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_methoximated_GCMS
        description: Methoximation for GCMS metabolomics analysis

  - ProcessedSample6_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_derivatized_GCMS
        description: Derivatized <Biosample> for GCMS metabolomics analysis #input to DG
        sampled_portion: methanol_layer

  - ProcessedSample7_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_extracted_LCMS
        description: Extracted supernatant from <Biosample> for LCMS metabolomics analysis

  - ProcessedSample8_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_SPE_LCMS
        description: Solid phase extraction of <Biosample> for LCMS metabolomics analysis

  - ProcessedSample9_bulk_soil:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_resuspended_LCMS
        description: Resuspended metabolites from <Biosample> for LCMS metabolomics analysis # input to DG
        sampled_portion: methanol_layer
filter_feces:
  steps:

  - Step 1_filter_feces:
      SubSamplingProcess:
        id: # nmdc:subspr-{shoulder}-{blade}
        type: nmdc:SubSamplingProcess
        name: Subsample
        description: A portion being taken from <Biosample> for extraction
        has_input:
        - Biosample
        has_output:
        - ProcessedSample1_filter_feces #GCMS
        - ProcessedSample2_filter_feces #LCMS
        processing_institution: EMSL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 2_filter_feces:
      Extraction:
        id: # nmdc:extrp-{shoulder}-{blade}
        type: nmdc:Extraction
        name: MPLEx
        description: MPLEx extraction of <ProcessedSample1> to obtain metabolites for GCMS analysis
        has_input:
        - ProcessedSample1_filter_feces
        has_output:
        - ProcessedSample3_filter_feces # top and bottom layer
        processing_institution: EMSL
        extraction_targets:
        - metabolite
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: chloroform
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 53.3
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 26.6
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 20.0
            has_unit: "%"
        volume:
          type: nmdc:QuantityValue
          has_raw_value: 1.4 mL # authors aimed to add 0.1mL of sample
          has_numeric_value: 1.4
          has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 3_filter_feces:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: methoximation_for_GCMS
        description: Methoximation of <ProcessedSample3>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample3_filter_feces
        has_output:
        - ProcessedSample4_filter_feces
        processing_institution: EMSL
        chemical_conversion_category: substitution
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methoxyamine
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.02 mL
            has_unit: mL
            has_numeric_value: 0.02
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 4_filter_feces:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: derivatization_for_GCMS
        description: Silylation of <ProcessedSample4>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample4_filter_feces
        has_output:
        - ProcessedSample5_filter_feces # DG GCMS input
        processing_institution: EMSL
        chemical_conversion_category: addition
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: N-methyl-N-trimethylsilyltrifluoroacetamide
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0792
            has_raw_value: 0.0792 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: trimethylchlorosilane
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0008
            has_raw_value: 0.0008 mL
            has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 5_filter_feces:
      Extraction:
        id:
        type: nmdc:Extraction
        description: Extraction of metabolites from <ProcessedSample2> for LCMS analysis
        name: Extracting Metabolites
        processing_institution: UCSD
        has_input:
        - ProcessedSample2_filter_feces
        has_output:
        - ProcessedSample6_filter_feces #supernatant
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 1.05
            has_raw_value: 1.05 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.45
            has_raw_value: 0.45 mL
            has_unit: mL
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 6_filter_feces:
      ChromatographicSeparationProcess:
        id: # nmdc:cspro-{shoulder}-{blade}
        type: nmdc:ChromatographicSeparationProcess
        name: SPE
        description: Solid phase extraction of metabolites from <ProcessedSample6> for LCMS analysis
        has_input:
        - ProcessedSample6_filter_feces
        has_output:
        - ProcessedSample7_filter_feces
        processing_institution: UCSD
        chromatographic_category: solid_phase_extraction
        ordered_mobile_phases:
        - type: nmdc:MobilePhaseSegment   # SPE beds activated
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          - type: nmdc:PortionOfSubstance
            known_as: water
        - type: nmdc:MobilePhaseSegment   # Wash solvent
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: water
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 1
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 70
              has_unit: "%"
          - type: nmdc:PortionOfSubstance
            known_as: water
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 30
              has_unit: "%"
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 2
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.6
            has_raw_value: 0.6 mL
            has_unit: mL
        stationary_phase: HLB
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 7_filter_feces:
      DissolvingProcess:
        id:
        type: nmdc:DissolvingProcess
        name: SPE_resuspension
        description: Resuspension of <ProcessedSample7>
        has_input:
        - ProcessedSample7_filter_feces
        has_output:
        - ProcessedSample8_filter_feces # DG LCMS input
        processing_institution: UCSD
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.091
            has_raw_value: 0.091 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: water
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.039
            has_raw_value: 0.039 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: amitriptyline
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 0.2
            has_unit: "umol/L"
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  processedsamples:

  - ProcessedSample1_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_GCMS
        description: Subsample of <Biosample> for GCMS metabolomics extraction and analysis

  - ProcessedSample2_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_LCMS
        description: Subsample of <Biosample> for LCMS metabolomics extraction and analysis

  - ProcessedSample3_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_mplex_extracted_GCMS
        description: Mplex-extracted, top and bottom layer for GCMS metabolomics analysis

  - ProcessedSample4_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_methoximated_GCMS
        description: Methoximation for GCMS metabolomics analysis

  - ProcessedSample5_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_derivatized_GCMS
        description: Derivatized <Biosample> for GCMS metabolomics analysis #input to DG
        sampled_portion: methanol_layer

  - ProcessedSample6_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_extracted_LCMS
        description: Extracted supernatant from <Biosample> for LCMS metabolomics analysis

  - ProcessedSample7_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_SPE_LCMS
        description: Solid phase extraction of <Biosample> for LCMS metabolomics analysis

  - ProcessedSample8_filter_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_resuspended_LCMS
        description: Resuspended metabolites from <Biosample> for LCMS metabolomics analysis # input to DG
        sampled_portion: methanol_layer
bulk_feces:
  steps:

  - Step 1_bulk_feces:
      SubSamplingProcess:
        id: # nmdc:subspr-{shoulder}-{blade}
        type: nmdc:SubSamplingProcess
        name: Subsample
        description: A portion being taken from <Biosample> for extraction
        has_input:
        - Biosample
        has_output:
        - ProcessedSample1_bulk_feces #GCMS
        - ProcessedSample2_bulk_feces #LCMS
        processing_institution: EMSL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 2_bulk_feces:
      Extraction:
        id: # nmdc:extrp-{shoulder}-{blade}
        type: nmdc:Extraction
        name: MPLEx
        description: MPLEx extraction of <ProcessedSample1> to obtain metabolites for GCMS analysis
        has_input:
        - ProcessedSample1_bulk_feces
        has_output:
        - ProcessedSample3_bulk_feces # top and bottom layer
        processing_institution: EMSL
        extraction_targets:
        - metabolite
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: chloroform
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 53.3
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 26.6
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 20.0
            has_unit: "%"
        volume:
          type: nmdc:QuantityValue
          has_raw_value: 1.4 mL # authors aimed to add 0.1mL of sample
          has_numeric_value: 1.4
          has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 3_bulk_feces:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: methoximation_for_GCMS
        description: Methoximation of <ProcessedSample3>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample3_bulk_feces
        has_output:
        - ProcessedSample4_bulk_feces
        processing_institution: EMSL
        chemical_conversion_category: substitution
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methoxyamine
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.02 mL
            has_unit: mL
            has_numeric_value: 0.02
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 4_bulk_feces:
      ChemicalConversionProcess:
        id: # nmdc:chcpr-{shoulder}-{blade}
        type: nmdc:ChemicalConversionProcess
        name: derivatization_for_GCMS
        description: Silylation of <ProcessedSample4>, part of derivatization for GCMS analysis
        has_input:
        - ProcessedSample4_bulk_feces
        has_output:
        - ProcessedSample5_bulk_feces # DG GCMS input
        processing_institution: EMSL
        chemical_conversion_category: addition
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: N-methyl-N-trimethylsilyltrifluoroacetamide
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0792
            has_raw_value: 0.0792 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: trimethylchlorosilane
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.0008
            has_raw_value: 0.0008 mL
            has_unit: mL
        protocol_link:
          name: EMP500 GCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsGC.md
          type: nmdc:Protocol

  - Step 5_bulk_feces:
      Extraction:
        id:
        type: nmdc:Extraction
        description: Extraction of metabolites from <ProcessedSample2> for LCMS analysis
        name: Extracting Metabolites
        processing_institution: UCSD
        has_input:
        - ProcessedSample2_bulk_feces
        has_output:
        - ProcessedSample6_bulk_feces #supernatant
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 70
            has_unit: "%"
        - type: nmdc:PortionOfSubstance
          known_as: water
          substance_role: solvent
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 30
            has_unit: "%"
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 6_bulk_feces:
      ChromatographicSeparationProcess:
        id: # nmdc:cspro-{shoulder}-{blade}
        type: nmdc:ChromatographicSeparationProcess
        name: SPE
        description: Solid phase extraction of metabolites from <ProcessedSample6> for LCMS analysis
        has_input:
        - ProcessedSample6_bulk_feces
        has_output:
        - ProcessedSample7_bulk_feces
        processing_institution: UCSD
        chromatographic_category: solid_phase_extraction
        ordered_mobile_phases:
        - type: nmdc:MobilePhaseSegment   # SPE beds activated
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          - type: nmdc:PortionOfSubstance
            known_as: water
        - type: nmdc:MobilePhaseSegment   # Wash solvent
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: water
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 1
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 70
              has_unit: "%"
          - type: nmdc:PortionOfSubstance
            known_as: water
            final_concentration:
              type: nmdc:QuantityValue
              has_numeric_value: 30
              has_unit: "%"
          volume:
            type: nmdc:QuantityValue
            has_raw_value: 0.6 mL
            has_unit: mL
            has_numeric_value: 0.6
        - type: nmdc:MobilePhaseSegment   # Sequential elution 2
          substances_used:
          - type: nmdc:PortionOfSubstance
            known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.6
            has_raw_value: 0.6 mL
            has_unit: mL
        stationary_phase: HLB
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  - Step 7_bulk_feces:
      DissolvingProcess:
        id:
        type: nmdc:DissolvingProcess
        name: SPE_resuspension
        description: Resuspension of <ProcessedSample7>
        has_input:
        - ProcessedSample7_bulk_feces
        has_output:
        - ProcessedSample8_bulk_feces # DG LCMS input
        processing_institution: UCSD
        substances_used:
        - type: nmdc:PortionOfSubstance
          known_as: methanol
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.091
            has_raw_value: 0.091 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: water
          volume:
            type: nmdc:QuantityValue
            has_numeric_value: 0.039
            has_raw_value: 0.039 mL
            has_unit: mL
        - type: nmdc:PortionOfSubstance
          known_as: amitriptyline
          final_concentration:
            type: nmdc:QuantityValue
            has_numeric_value: 0.2
            has_unit: "umol/L"
        protocol_link:
          name: EMP500 LCMS Metabolomics Protocol
          url: https://github.com/biocore/emp/blob/master/protocols/MetabolomicsLC.md
          type: nmdc:Protocol

  processedsamples:

  - ProcessedSample1_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_GCMS
        description: Subsample of <Biosample> for GCMS metabolomics extraction and analysis

  - ProcessedSample2_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_subsample_LCMS
        description: Subsample of <Biosample> for LCMS metabolomics extraction and analysis

  - ProcessedSample3_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_mplex_extracted_GCMS
        description: Mplex-extracted, top and bottom layer for GCMS metabolomics analysis

  - ProcessedSample4_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_methoximated_GCMS
        description: Methoximation for GCMS metabolomics analysis

  - ProcessedSample5_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_derivatized_GCMS
        description: Derivatized <Biosample> for GCMS metabolomics analysis #input to DG
        sampled_portion: methanol_layer

  - ProcessedSample6_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_extracted_LCMS
        description: Extracted supernatant from <Biosample> for LCMS metabolomics analysis

  - ProcessedSample7_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_SPE_LCMS
        description: Solid phase extraction of <Biosample> for LCMS metabolomics analysis

  - ProcessedSample8_bulk_feces:
      ProcessedSample:
        id: #nmdc:
        type: nmdc:ProcessedSample
        name: <Biosample>_resuspended_LCMS
        description: Resuspended metabolites from <Biosample> for LCMS metabolomics analysis # input to DG
        sampled_portion: methanol_layer
